# アクティブコンテキスト

## 現在の作業状況

### 実装フェーズ（フェーズ1：教材準備）

- サンプルアプリケーション実装
  - 第1章：環境構築とTodoアプリの基本実装 ✅
  - 第2章：OpenTelemetryの導入 ✅
    - OpenTelemetry SDKの統合 ✅
    - 自動計装の設定 ✅
    - カスタムSpanの実装 ✅
    - メトリクスの追加 ✅
  - 第3章：観測環境の構築 ✅
    - OpenTelemetry Collectorの設定 ✅
    - Jaegerの統合 ✅
    - Prometheusの設定 ✅
    - Grafanaの設定 ✅
  - 第4章：高度な機能と運用 ✅
    - Sampling設定の最適化 ✅
    - カスタムメトリクスの追加 ✅
    - エラー処理の改善 ✅
    - パフォーマンス分析 ✅

- 学習テキスト作成
  - 第1章のテキスト作成完了 ✅
  - 第2章のテキスト作成完了 ✅
  - 第3章のテキスト作成完了 ✅
  - 第4章のテキスト作成開始 🚧

- 教師用プロンプト作成
  - 第1章のプロンプト作成開始 🚧

### 完了したタスク

1. サンプルアプリケーション実装
   - 全章の実装完了（第1章〜第4章）
   - 機能テストの実施
   - パフォーマンス確認

2. 第4章の機能追加
   - サンプリング設定の最適化
     - 環境別サンプリング率（開発:100%, 本番:10%）
     - 重要エンドポイントの常時サンプリング
     - エラー時の自動サンプリング
   - カスタムメトリクスの追加
     - APIレスポンスタイムの計測
     - エラー発生率の追跡
     - 優先度別の操作カウント
   - エラーハンドリングの改善
     - エラー種別の記録
     - エラーメトリクスの収集
     - エラー時の自動トレース

### 進行中のタスク

1. 学習テキスト作成
   - 第4章の執筆準備
     - サンプリング設定の解説
     - カスタムメトリクスの実装方法
     - エラーハンドリングのベストプラクティス
     - パフォーマンス分析手法の解説

2. 教師用プロンプト作成
   - レビュー基準の策定
   - よくある質問への回答テンプレート
   - 実装アドバイステンプレート
   - 理解度確認質問リスト

## 実装状態

### インフラストラクチャ

- Dev Container: ✅設定完了
- データベース: ✅PostgreSQL設定・接続完了
- 監視環境: ✅設定完了
  - OpenTelemetry Collector
  - Jaeger
  - Prometheus
  - Grafana

### バックエンド

- WebAPI: ✅基本実装完了
- データモデル: ✅実装完了
- OpenTelemetry: ✅設定完了
  - SDK統合
  - 自動計装
  - カスタム計装
  - メトリクス収集

### フロントエンド

- Reactアプリケーション: ✅作成完了
- API連携: ✅実装完了
- UIコンポーネント: ✅実装完了

## 次のステップ

### 学習テキストの作成
1. 第4章：高度な機能と運用
   - サンプリング設定の解説
   - カスタムメトリクスの実装方法
   - エラーハンドリングのベストプラクティス
   - パフォーマンス分析手法

3. 実装ガイダンスの整備
   - コード例の追加
   - 設定ファイルのテンプレート
   - デバッグ手順の解説

### 教師用プロンプトの準備
1. レビュー基準の策定
   - コード品質の評価基準
   - 実装の完成度チェックリスト
   - パフォーマンス要件の確認項目

2. 質問回答テンプレート作成
   - よくある技術的質問への回答
   - トラブルシューティングガイド
   - 実装アドバイス例

## 技術的な注意点

### 実装の検証ポイント

1. サンプリング設定
   - 環境による動的な設定変更
   - 重要度に基づく選択的サンプリング
   - エラー時の確実な記録

2. メトリクス収集
   - レスポンスタイムの計測
   - エラー率の監視
   - カスタムタグの活用

3. エラーハンドリング
   - 詳細なエラー情報の記録
   - トレースとの関連付け
   - メトリクスへの反映

## リスクと対策

### 実装リスク

1. パフォーマンスへの影響
   - サンプリング率の適切な設定
   - メトリクス収集の最適化
   - トレース情報の制御

2. エラー検出の確実性
   - 重要なエラーの見落とし防止
   - 適切なログレベルの設定
   - アラート条件の調整

### 対策

1. 継続的なモニタリング
   - パフォーマンスメトリクスの監視
   - エラー発生率のトラッキング
   - リソース使用率の確認

2. ドキュメントの整備
   - 設定変更手順の明確化
   - トラブルシューティングガイドの充実
   - 運用手順の文書化

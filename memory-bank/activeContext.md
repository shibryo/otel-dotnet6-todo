# アクティブコンテキスト

## 現在の作業状態

### 完了した作業

- プロジェクトの基本要件の定義
- 製品コンテキストの確立
- 技術スタックの選定
- システムパターンの定義
- DevContainer 環境の基本設定
  - devcontainer.json
  - docker-compose.yml（PostgreSQL 含む）
  - Dockerfile

### 進行中の作業

- Tilt 環境のセットアップ
- プロジェクト構造の計画

## 次のステップ

### 1. Tilt 環境のセットアップ

1. Tilt 環境の構築

   - Tiltfile の作成
   - リソース定義
   - ホットリロード設定

2. データベース環境の準備
   - 初期化スクリプトの作成
   - マイグレーション計画

### 2. プロジェクトの初期化

1. ソリューション構造の作成

   ```
   src/
   ├── Domain/
   ├── Application/
   ├── Infrastructure/
   ├── Api/
   └── Tests/
       ├── Unit/
       ├── Integration/
       └── E2E/
   ```

2. 基本的なエンティティとインターフェースの実装
   - Todo エンティティ
   - リポジトリインターフェース
   - DB コンテキスト

### 3. 機能実装

1. Domain 層

   - エンティティの実装
   - 値オブジェクトの実装
   - ドメインサービスの実装

2. Application 層

   - ユースケースの実装
   - DTO の定義
   - バリデーションの実装

3. Infrastructure 層

   - リポジトリの実装
   - DB マイグレーション
   - OpenTelemetry の設定

4. API 層
   - コントローラーの実装
   - ミドルウェアの設定
   - エラーハンドリング

### 4. テスト実装

1. ユニットテスト

   - Domain のテスト
   - Application のテスト

2. インテグレーションテスト

   - API のテスト
   - DB のテスト

3. E2E テスト
   - シナリオテスト
   - パフォーマンステスト

## 優先度の高い課題

1. DevContainer 環境の構築
2. データベース設計とマイグレーション
3. OpenTelemetry の統合設計

## リスク管理

1. 技術的なリスク

   - OpenTelemetry の設定複雑性
   - マイクロサービス間の通信の信頼性
   - パフォーマンスボトルネック

2. プロジェクト管理のリスク
   - 技術スタックの学習曲線
   - テスト範囲の適切な設定

## 決定事項

1. アーキテクチャ

   - オニオンアーキテクチャの採用
   - CQRS パターンの適用
   - リポジトリパターンの使用

2. テスト戦略
   - TDD アプローチの採用
   - テストピラミッドの比率設定
